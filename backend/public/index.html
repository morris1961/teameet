<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test</title>
</head>

<body>
  <ul>
    <li>
      <div>
        <input id="emailR" placeholder="email" value="aaa@bbb.ccc" />
        <input id="UNameR" placeholder="UName" value="abc" />
        <input id="passwordR" placeholder="password" value="abc" />
        <button onclick="sendMessage('register')">register</button>
      </div>
    </li>
    <li>
      <div>
        <input id="emailL" placeholder="email" value="aaa@bbb.ccc" />
        <input id="passwordL" placeholder="password" value="abc" />
        <button onclick="sendMessage('login')">login</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDI" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <button onclick="sendMessage('index')">index</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDC" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="GName" placeholder="GName" value="gname" />
        <input id="file" placeholder="file" value="file" />
        <button onclick="sendMessage('createGroup')">createGroup</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDJ" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="code" placeholder="code" value="#01a852" />
        <button onclick="sendMessage('joinGroup')">joinGroup</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDRE" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="UNameRE" placeholder="UName" value="newName" />
        <input id="passwordRE" placeholder="password" value="newpassword" />
        <button onclick="sendMessage('renewProfile')">renewProfile</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDG" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="GIDG" placeholder="GID" value="60af1e7eee0d0006dc01a852" />
        <button onclick="sendMessage('group')">group</button>
      </div>
    </li>
    <li>
      <div>
        <input id="GIDRE" placeholder="GID" value="60af1e7eee0d0006dc01a852" />
        <input id="fileRE" placeholder="file" value="newfile" />
        <button onclick="sendMessage('renewFile')">renewFile</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDD" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="GIDD" placeholder="GID" value="60af1e7eee0d0006dc01a852" />
        <input id="subjectD" placeholder="subject" value="subject" />
        <input id="contentD" placeholder="content" value="content" />
        <input type="datetime-local" id="time_startD">
        <input type="datetime-local" id="time_endD">
        <input type="datetime-local" id="deadlineD">
        <select id="time_spanD">
          <option value=30>30</option>
          <option value=60>60</option>
          <option value=120>120</option>
        </select>
        <button onclick="sendMessage('createDiscussion')">createDiscussion</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDDD" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDDD" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <button onclick="sendMessage('discussion')">discussion</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDT" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDT" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <button onclick="sendMessage('time')">time</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDP" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDP" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <button onclick="sendMessage('place')">place</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDVT" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDVT" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <input type="datetime-local" id="time_option">
        <button onclick="sendMessage('voteTime')">voteTime</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDAP" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDAP" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <input id="placeAP" placeholder="place" value="台大" />
        <button onclick="sendMessage('addPlace')">addPlace</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDVP" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDVP" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <input id="placeVP" placeholder="place" value="台大" />
        <button onclick="sendMessage('votePlace')">votePlace</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDCP" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDCP" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <input id="place_resultCP" placeholder="place" value="台大" />
        <button onclick="sendMessage('confirmPlace')">confirmPlace</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDCT" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="DIDCT" placeholder="DID" value="60af6e8b6c694433b8bd7c00" />
        <input type="datetime-local" id="time_resultCT">
        <button onclick="sendMessage('confirmTime')">confirmTime</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDCH" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="GIDCH" placeholder="DID" value="60af1e7eee0d0006dc01a852" />
        <button onclick="sendMessage('chat')">chat</button>
      </div>
    </li>
    <li>
      <div>
        <input id="UIDM" placeholder="UID" value="60af1e6cee0d0006dc01a851" />
        <input id="GIDM" placeholder="DID" value="60af1e7eee0d0006dc01a852" />
        <input id="bodyM">
        <button onclick="sendMessage('message')">message</button>
      </div>
    </li>
  </ul>
  <script>
    const HOST = location.origin.replace(/^http/, 'ws')
    const server = new WebSocket(HOST);
    server.onopen = () => console.log('Server connected.');
    server.onmessage = (m) => {
      console.log(JSON.parse(m.data));
    };
    server.sendEvent = (e) => server.send(JSON.stringify(e));

    const sendMessage = (api) => {
      switch (api) {
        case 'register':
          const UNameDOMR = document.getElementById('UNameR');
          const emailDOMR = document.getElementById('emailR');
          const passwordDOMR = document.getElementById('passwordR');
          if (!emailDOMR.value || !UNameDOMR.value || !passwordDOMR.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { email: emailDOMR.value, UName: UNameDOMR.value, password: passwordDOMR.value },
          });
          break;
        case 'login':
          const emailDOML = document.getElementById('emailL');
          const passwordDOML = document.getElementById('passwordL');
          if (!emailDOML.value || !passwordDOML.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { email: emailDOML.value, password: passwordDOML.value },
          });
          break;
        case 'index':
          const UIDIDOML = document.getElementById('UIDI');
          if (!UIDIDOML.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDIDOML.value },
          });
          break;
        case 'createGroup':
          const UIDCDOM = document.getElementById('UIDC');
          const GNameDOM = document.getElementById('GName');
          const fileDOM = document.getElementById('file');
          if (!UIDCDOM.value || !GNameDOM.value || !fileDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { admin: UIDCDOM.value, GName: GNameDOM.value, file: fileDOM.value },
          });
          break;
        case 'joinGroup':
          const UIDJCDOM = document.getElementById('UIDJ');
          const codeDOM = document.getElementById('code');
          if (!UIDJCDOM.value || !codeDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDJCDOM.value, code: codeDOM.value },
          });
          break;
        case 'renewProfile':
          const UIDREDOM = document.getElementById('UIDRE');
          const UNameREDOM = document.getElementById('UNameRE');
          const passwordREDOM = document.getElementById('passwordRE');
          if (!UIDREDOM.value || !UNameREDOM.value || !passwordREDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDREDOM.value, UName: UNameREDOM.value, password: passwordREDOM.value },
          });
          break;
        case 'group':
          const UIDGDOM = document.getElementById('UIDG');
          const GIDGDOM = document.getElementById('GIDG');
          if (!UIDGDOM.value || !GIDG.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDGDOM.value, GID: GIDGDOM.value },
          });
          break;
        case 'renewFile':
          const GIDREDOM = document.getElementById('GIDRE');
          const fileREDOM = document.getElementById('fileRE');
          if (!GIDREDOM.value || !fileREDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { file: fileREDOM.value, GID: GIDREDOM.value },
          });
          break;
        case 'createDiscussion':
          const UIDDDOM = document.getElementById('UIDD');
          const GIDDDOM = document.getElementById('GIDD');
          const subjectDDOM = document.getElementById('subjectD');
          const contentDDOM = document.getElementById('contentD');
          const time_startDDOM = document.getElementById('time_startD');
          const time_endDDOM = document.getElementById('time_endD');
          const deadlineDDOM = document.getElementById('deadlineD');
          const time_spanDDOM = document.getElementById('time_spanD');
          if (!UIDDDOM.value || !GIDDDOM.value || !subjectDDOM.value || !contentDDOM.value ||
            !time_startDDOM.value || !time_endDDOM.value || !deadlineDDOM.value || !time_spanDDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: {
              UID: UIDDDOM.value, GID: GIDDDOM.value, subject: subjectDDOM.value, content: contentDDOM.value,
              time_start: time_startDDOM.value, time_end: time_endDDOM.value, deadline: deadlineDDOM.value, time_span: time_spanDDOM.value
            },
          });
          break;
        case 'discussion':
          const UIDDDDOM = document.getElementById('UIDDD');
          const DIDDDDOM = document.getElementById('DIDDD');
          if (!DIDDDDOM.value || !UIDDDDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDDDDOM.value, DID: DIDDDDOM.value },
          });
          break;
        case 'time':
          const UIDTDOM = document.getElementById('UIDT');
          const DIDTDOM = document.getElementById('DIDT');
          if (!DIDTDOM.value || !UIDTDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDTDOM.value, DID: DIDTDOM.value },
          });
          break;
        case 'place':
          const UIDPDOM = document.getElementById('UIDP');
          const DIDPDOM = document.getElementById('DIDP');
          if (!DIDPDOM.value || !UIDPDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDPDOM.value, DID: DIDPDOM.value },
          });
          break;
        case 'voteTime':
          const UIDVTDOM = document.getElementById('UIDVT');
          const DIDVTDOM = document.getElementById('DIDVT');
          const time_optionDOM = document.getElementById('time_option');
          if (!DIDVTDOM.value || !UIDVTDOM.value || !time_optionDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDVTDOM.value, DID: DIDVTDOM.value, times: [time_optionDOM.value] },
          });
          break;
        case 'addPlace':
          const UIDAPDOM = document.getElementById('UIDAP');
          const DIDAPDOM = document.getElementById('DIDAP');
          const placeAPDOM = document.getElementById('placeAP');
          if (!UIDAPDOM.value || !DIDAPDOM.value || !placeAPDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDAPDOM.value, DID: DIDAPDOM.value, place: placeAPDOM.value },
          });
          break;
        case 'votePlace':
          const UIDVPDOM = document.getElementById('UIDVP');
          const DIDVPDOM = document.getElementById('DIDVP');
          const placeVPDOM = document.getElementById('placeVP');
          if (!UIDVPDOM.value || !DIDVPDOM.value || !placeVPDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDVPDOM.value, DID: DIDVPDOM.value, places: [placeVPDOM.value] },
          });
          break;
        case 'confirmPlace':
          const UIDCPDOM = document.getElementById('UIDCP');
          const DIDCPDOM = document.getElementById('DIDCP');
          const place_resultCPDOM = document.getElementById('place_resultCP');
          if (!UIDCPDOM.value || !DIDCPDOM.value || !place_resultCPDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDCPDOM.value, DID: DIDCPDOM.value, place_result: place_resultCPDOM.value },
          });
          break;
        case 'confirmTime':
          const UIDCTDOM = document.getElementById('UIDCT');
          const DIDCTDOM = document.getElementById('DIDCT');
          const time_resultCTDOM = document.getElementById('time_resultCT');
          if (!DIDCTDOM.value || !UIDCTDOM.value || !time_resultCTDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDCTDOM.value, DID: DIDCTDOM.value, time_result: time_resultCTDOM.value },
          });
          break;
        case 'chat':
          const UIDCHDOM = document.getElementById('UIDCH');
          const GIDCHDOM = document.getElementById('GIDCH');
          if (!UIDCHDOM.value || !GIDCHDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDCHDOM.value, GID: GIDCHDOM.value },
          });
          break;
        case 'message':
          const UIDMDOM = document.getElementById('UIDM');
          const GIDMDOM = document.getElementById('GIDM');
          const bodyMDOM = document.getElementById('bodyM');
          if (!UIDMDOM.value || !GIDMDOM.value || !bodyMDOM.value) {
            throw new Error('Empty input!');
          }
          server.sendEvent({
            api: api,
            data: { UID: UIDMDOM.value, GID: GIDMDOM.value, body: bodyMDOM.value },
          });
          break;
        default:
          console.log("QQ")
          break;
      }
    };

  </script>
</body>

</html>