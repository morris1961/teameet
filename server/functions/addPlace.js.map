{"version":3,"sources":["../../backend/functions/addPlace.js"],"names":["addPlace","UID","DID","place","status","place_options","error_msg","Discussion","findById","discussion","key","value","set","updateOne","$set","console","log"],"mappings":";;;;;;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA;SACeA,Q;;;;;sEAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA0BC,YAAAA,GAA1B,QAA0BA,GAA1B,EAA+BC,GAA/B,QAA+BA,GAA/B,EAAoCC,KAApC,QAAoCA,KAApC;AACMC,YAAAA,MADN,GACe,KADf;AAEMC,YAAAA,aAFN,GAEsB,EAFtB;AAGMC,YAAAA,SAHN,GAGkB,oBAHlB;AAAA;AAAA;AAAA,mBAK6BC,uBAAWC,QAAX,CAAoBN,GAApB,CAL7B;;AAAA;AAKUO,YAAAA,UALV;;AAAA,gBAMSA,UANT;AAAA;AAAA;AAAA;;AAOML,YAAAA,MAAM,GAAG,KAAT;AACAE,YAAAA,SAAS,GAAG,8BAAZ;AARN,6CASa;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUE,cAAAA,SAAS,EAATA;AAAV,aATb;;AAAA;AAWID,YAAAA,aAAa,GAAGI,UAAU,CAACJ,aAA3B;AAXJ,mDAY6BA,aAZ7B;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,0DAYcK,GAZd,mBAYmBC,KAZnB;;AAAA,kBAaUD,GAAG,KAAKP,KAblB;AAAA;AAAA;AAAA;;AAcQC,YAAAA,MAAM,GAAG,KAAT;AACAE,YAAAA,SAAS,GAAG,2BAAZ;AAfR,6CAgBe;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUE,cAAAA,SAAS,EAATA;AAAV,aAhBf;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAmBID,YAAAA,aAAa,CAACO,GAAd,CAAkBT,KAAlB,EAAyB,EAAzB;AAnBJ;AAAA,mBAoBUM,UAAU,CAACI,SAAX,CAAqB;AAAEC,cAAAA,IAAI,EAAE;AAAET,gBAAAA,aAAa,EAAbA;AAAF;AAAR,aAArB,CApBV;;AAAA;AAqBID,YAAAA,MAAM,GAAG,IAAT;AACAE,YAAAA,SAAS,GAAG,YAAZ;AAtBJ;AAAA;;AAAA;AAAA;AAAA;AAwBIS,YAAAA,OAAO,CAACC,GAAR;AACAZ,YAAAA,MAAM,GAAG,KAAT;AACAE,YAAAA,SAAS,GAAG,oBAAZ;AAAiC;;AA1BrC;AAAA,6CA4BS;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUC,cAAAA,aAAa,EAAbA,aAAV;AAAyBC,cAAAA,SAAS,EAATA;AAAzB,aA5BT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;eA+BeN,Q","sourcesContent":["// import models\r\nimport Discussion from '../models/discussion.js'\r\n\r\n// function for every cases\r\nasync function addPlace({ UID, DID, place }) {\r\n  var status = false;\r\n  var place_options = [];\r\n  var error_msg = \"Something wrong...\";\r\n  try {\r\n    const discussion = await Discussion.findById(DID);\r\n    if (!discussion) {\r\n      status = false;\r\n      error_msg = \"The discussion is not valid!\";\r\n      return { status, error_msg };\r\n    }\r\n    place_options = discussion.place_options;\r\n    for (var [key, value] of place_options) {\r\n      if (key === place) {\r\n        status = false;\r\n        error_msg = \"The place has been added!\";\r\n        return { status, error_msg };\r\n      }\r\n    }\r\n    place_options.set(place, []);\r\n    await discussion.updateOne({ $set: { place_options } })\r\n    status = true;\r\n    error_msg = \"Successed!\";\r\n  } catch (e) {\r\n    console.log(e)\r\n    status = false;\r\n    error_msg = \"Something wrong...\";;\r\n  }\r\n  return { status, place_options, error_msg };\r\n}\r\n\r\nexport default addPlace;"],"file":"addPlace.js"}