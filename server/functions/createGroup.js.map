{"version":3,"sources":["../../backend/functions/createGroup.js"],"names":["createGroup","GName","admin","file","status","GID","error_msg","User","findById","adminUser","newGroup","Group","save","_id","updateOne","$set","code","toString","slice","groups","push","console","log"],"mappings":";;;;;;;AACA;;AACA;;;;;;;;AAEA;SACeA,W;;;;;yEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6BC,YAAAA,KAA7B,QAA6BA,KAA7B,EAAoCC,KAApC,QAAoCA,KAApC,EAA2CC,IAA3C,QAA2CA,IAA3C;AACMC,YAAAA,MADN,GACe,KADf;AAEMC,YAAAA,GAFN,GAEY,EAFZ;AAGMC,YAAAA,SAHN,GAGkB,oBAHlB;AAAA;AAAA;AAAA,mBAK4BC,iBAAKC,QAAL,CAAcN,KAAd,CAL5B;;AAAA;AAKUO,YAAAA,SALV;;AAAA,gBAMSA,SANT;AAAA;AAAA;AAAA;;AAOML,YAAAA,MAAM,GAAG,KAAT;AACAE,YAAAA,SAAS,GAAG,wBAAZ;AARN,6CASa;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUE,cAAAA,SAAS,EAATA;AAAV,aATb;;AAAA;AAYUI,YAAAA,QAZV,GAYqB,IAAIC,iBAAJ,CAAU;AAAEV,cAAAA,KAAK,EAALA,KAAF;AAASC,cAAAA,KAAK,EAALA,KAAT;AAAgBC,cAAAA,IAAI,EAAJA;AAAhB,aAAV,CAZrB;AAAA;AAAA,mBAaUO,QAAQ,CAACE,IAAT,EAbV;;AAAA;AAcIP,YAAAA,GAAG,GAAGK,QAAQ,CAACG,GAAf;AAdJ;AAAA,mBAeUF,kBAAMG,SAAN,CAAgB;AAAED,cAAAA,GAAG,EAAER;AAAP,aAAhB,EAA8B;AAAEU,cAAAA,IAAI,EAAE;AAAEC,gBAAAA,IAAI,aAAMX,GAAG,CAACY,QAAJ,GAAeC,KAAf,CAAqB,CAAC,CAAtB,CAAN;AAAN;AAAR,aAA9B,CAfV;;AAAA;AAiBQC,YAAAA,MAjBR,GAiBiBV,SAAS,CAACU,MAjB3B;AAkBIA,YAAAA,MAAM,CAACC,IAAP,CAAYf,GAAZ;AAlBJ;AAAA,mBAmBUE,iBAAKO,SAAL,CAAe;AAAED,cAAAA,GAAG,EAAEX;AAAP,aAAf,EAA+B;AAAEa,cAAAA,IAAI,EAAE;AAAEI,gBAAAA,MAAM,EAANA;AAAF;AAAR,aAA/B,CAnBV;;AAAA;AAqBIf,YAAAA,MAAM,GAAG,IAAT;AACAE,YAAAA,SAAS,GAAG,YAAZ;AAtBJ;AAAA;;AAAA;AAAA;AAAA;AAwBIe,YAAAA,OAAO,CAACC,GAAR;AACAlB,YAAAA,MAAM,GAAG,KAAT;AACAE,YAAAA,SAAS,GAAG,oBAAZ;AAAiC;;AA1BrC;AAAA,6CA4BS;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUC,cAAAA,GAAG,EAAHA,GAAV;AAAeJ,cAAAA,KAAK,EAALA,KAAf;AAAsBK,cAAAA,SAAS,EAATA;AAAtB,aA5BT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;eA+BeN,W","sourcesContent":["// import models\r\nimport Group from '../models/group.js';\r\nimport User from '../models/user.js';\r\n\r\n// function for every cases\r\nasync function createGroup({ GName, admin, file }) {\r\n  var status = false;\r\n  var GID = \"\";\r\n  var error_msg = \"Something wrong...\";\r\n  try {\r\n    const adminUser = await User.findById(admin);\r\n    if (!adminUser) {\r\n      status = false;\r\n      error_msg = \"The user is not valid!\"\r\n      return { status, error_msg };\r\n    }\r\n\r\n    const newGroup = new Group({ GName, admin, file });\r\n    await newGroup.save();\r\n    GID = newGroup._id;\r\n    await Group.updateOne({ _id: GID }, { $set: { code: `#${GID.toString().slice(-6)}` } });\r\n\r\n    var groups = adminUser.groups\r\n    groups.push(GID);\r\n    await User.updateOne({ _id: admin }, { $set: { groups } })\r\n    \r\n    status = true;\r\n    error_msg = \"Successed!\";\r\n  } catch (e) {\r\n    console.log(e)\r\n    status = false;\r\n    error_msg = \"Something wrong...\";;\r\n  }\r\n  return { status, GID, GName, error_msg };\r\n}\r\n\r\nexport default createGroup;"],"file":"createGroup.js"}