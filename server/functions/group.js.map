{"version":3,"sources":["../../backend/functions/group.js"],"names":["group","UID","GID","status","code","GName","isAdmin","messages","file","discussions","error_msg","Group","findById","User","user","admin","toString","i","length","Discussion","aDisscussion","push","DID","_id","subject","console","log"],"mappings":";;;;;;;AACA;;AACA;;AACA;;;;;;;;AAEA;SACeA,K;;;;;mEAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAuBC,YAAAA,GAAvB,QAAuBA,GAAvB,EAA4BC,GAA5B,QAA4BA,GAA5B;AACMC,YAAAA,MADN,GACe,KADf;AAEMC,YAAAA,IAFN,GAEa,EAFb;AAGMC,YAAAA,KAHN,GAGc,EAHd;AAIMC,YAAAA,OAJN,GAIgB,KAJhB;AAKMC,YAAAA,QALN,GAKiB,EALjB,EAKqB;;AACfC,YAAAA,IANN,GAMa,EANb;AAOMC,YAAAA,WAPN,GAOoB,EAPpB;AAQMC,YAAAA,SARN,GAQkB,oBARlB;AAAA;AAAA;AAAA,mBAUwBC,mBAAMC,QAAN,CAAeV,GAAf,CAVxB;;AAAA;AAUUF,YAAAA,OAVV;;AAAA,gBAWSA,OAXT;AAAA;AAAA;AAAA;;AAYMG,YAAAA,MAAM,GAAG,KAAT;AACAO,YAAAA,SAAS,GAAG,wBAAZ;AAbN,6CAca;AAAEP,cAAAA,MAAM,EAANA,MAAF;AAAUO,cAAAA,SAAS,EAATA;AAAV,aAdb;;AAAA;AAAA;AAAA,mBAgBuBG,iBAAKD,QAAL,CAAcX,GAAd,CAhBvB;;AAAA;AAgBUa,YAAAA,IAhBV;;AAAA,gBAiBSA,IAjBT;AAAA;AAAA;AAAA;;AAkBMX,YAAAA,MAAM,GAAG,KAAT;AACAO,YAAAA,SAAS,GAAG,wBAAZ;AAnBN,6CAoBa;AAAEP,cAAAA,MAAM,EAANA,MAAF;AAAUO,cAAAA,SAAS,EAATA;AAAV,aApBb;;AAAA;AAsBIN,YAAAA,IAAI,GAAGJ,OAAK,CAACI,IAAb;AACAC,YAAAA,KAAK,GAAGL,OAAK,CAACK,KAAd;AACAC,YAAAA,OAAO,GAAGN,OAAK,CAACe,KAAN,CAAYC,QAAZ,OAA2Bf,GAAG,CAACe,QAAJ,EAArC,CAxBJ,CAyBI;AACA;;AACAR,YAAAA,IAAI,GAAGR,OAAK,CAACQ,IAAb;AACSS,YAAAA,CA5Bb,GA4BiB,CA5BjB;;AAAA;AAAA,kBA4BoBA,CAAC,GAAGjB,OAAK,CAACS,WAAN,CAAkBS,MA5B1C;AAAA;AAAA;AAAA;;AAAA;AAAA,mBA6BiCC,uBAAWP,QAAX,CAAoBZ,OAAK,CAACS,WAAN,CAAkBQ,CAAlB,CAApB,CA7BjC;;AAAA;AA6BYG,YAAAA,YA7BZ;AA8BMX,YAAAA,WAAW,CAACY,IAAZ,CAAiB;AAAEC,cAAAA,GAAG,EAAEF,YAAY,CAACG,GAApB;AAAyBC,cAAAA,OAAO,EAAEJ,YAAY,CAACI;AAA/C,aAAjB;;AA9BN;AA4BkDP,YAAAA,CAAC,EA5BnD;AAAA;AAAA;;AAAA;AAgCId,YAAAA,MAAM,GAAG,IAAT;AACAO,YAAAA,SAAS,GAAG,YAAZ;AAjCJ;AAAA;;AAAA;AAAA;AAAA;AAmCIe,YAAAA,OAAO,CAACC,GAAR;AACAvB,YAAAA,MAAM,GAAG,KAAT;AACAO,YAAAA,SAAS,GAAG,oBAAZ;AAAiC;;AArCrC;AAAA,6CAuCS;AAAEP,cAAAA,MAAM,EAANA,MAAF;AAAUC,cAAAA,IAAI,EAAJA,IAAV;AAAgBC,cAAAA,KAAK,EAALA,KAAhB;AAAuBC,cAAAA,OAAO,EAAPA,OAAvB;AAAgCC,cAAAA,QAAQ,EAARA,QAAhC;AAA0CC,cAAAA,IAAI,EAAJA,IAA1C;AAAgDC,cAAAA,WAAW,EAAXA,WAAhD;AAA6DC,cAAAA,SAAS,EAATA;AAA7D,aAvCT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;eA0CeV,K","sourcesContent":["// import models\r\nimport Group from '../models/group.js';\r\nimport User from '../models/user.js';\r\nimport Discussion from '../models/discussion.js';\r\n\r\n// function for every cases\r\nasync function group({ UID, GID }) {\r\n  var status = false;\r\n  var code = \"\";\r\n  var GName = \"\";\r\n  var isAdmin = false;\r\n  var messages = []; // (sort by time)  // todo\r\n  var file = \"\";\r\n  var discussions = [];\r\n  var error_msg = \"Something wrong...\";\r\n  try {\r\n    const group = await Group.findById(GID);\r\n    if (!group) {\r\n      status = false;\r\n      error_msg = \"The code is not valid!\"\r\n      return { status, error_msg };\r\n    }\r\n    const user = await User.findById(UID);\r\n    if (!user) {\r\n      status = false;\r\n      error_msg = \"The user is not valid!\"\r\n      return { status, error_msg };\r\n    }\r\n    code = group.code;\r\n    GName = group.GName;\r\n    isAdmin = group.admin.toString() === UID.toString();\r\n    // todo\r\n    // messages = group.messages;\r\n    file = group.file;\r\n    for (let i = 0; i < group.discussions.length; i++) {\r\n      const aDisscussion = await Discussion.findById(group.discussions[i]);\r\n      discussions.push({ DID: aDisscussion._id, subject: aDisscussion.subject });\r\n    }\r\n    status = true;\r\n    error_msg = \"Successed!\";\r\n  } catch (e) {\r\n    console.log(e)\r\n    status = false;\r\n    error_msg = \"Something wrong...\";;\r\n  }\r\n  return { status, code, GName, isAdmin, messages, file, discussions, error_msg };\r\n}\r\n\r\nexport default group;"],"file":"group.js"}